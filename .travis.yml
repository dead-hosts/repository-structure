env:
  global:
    - secure: Tdwa24RX4Cnl8GpRLRA5cOz1ntbTDTEB8jpY8HD81lVomTfPMSUZLe6hUDIlpTsQdgWD7Oh8GW0P7GwQaZaAMwIbNEAOXg9ZQ7+Pz9u9Pp4p/nvEFm23zsPUN/PP4qQtPdWQgOk501MOG7+ihg/mLbGwxcGcEeWrcf3YBgJhZevKhKNCDIdLcEhpvXkvHoApeJF4U4xSvKBrkowPbn4gvLWVjluIFhQQMSu34TZqr2qNPBeARP7oGv7pWrndU96mENWocrf5iNaqJfDQMjrwew2hbZN2/oFtxgtzqtHPqQOuKotYgdiXpYRKzjI7vQShW2gG8+oHpsbUI/lmjOGkBEFaxN6kexhx636JOke0z0kZ3jqV4wlGMnKeG6ZqbHn3mLVj8Isk6RjPK2FRnkRt556Whn1o0QLJ8ymOTEBIr80nUJZguqZ3AZCq7s0Ec59k5nBrrMx3Uk4pWCCu4tV1oZaebh/XTX347qKWmYlcHmNv6NB2aHMqNzwIOFufVuDllRy+OuHoYOva7qFcV+X4wkD+1EWG/PRxz6xm61lr0kXUv8rpifA/OHtgjsbV4aG22C9TRqH0R977Z5x5UP6xZKaWvyCBhIgTHoLopD3xkb3MHvT5X4EU+hbYh7XlZIHyEOzoLqS36PTIsCxHRIK2ogt2+m2ZOagk8MVJ9Dyr1Vs=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/repository-structure
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  email:
    recipients:
      - dead-hosts@funilrys.com
    on_success: never
    on_failure: always
